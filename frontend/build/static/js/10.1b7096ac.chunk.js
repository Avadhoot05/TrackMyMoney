(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[10],{114:function(e,t,n){"use strict";var a=n(14),c=n(2),s=n(115),r=n.n(s),o=n(1);t.a=function(e){var t=e.text,n=e.delay,s=(e.bShowCloseButton,e.bError),l=e.reset;console.log("Alert"),console.log(t),console.log(n);var i=Object(c.useState)(!1),u=Object(a.a)(i,2),d=u[0],p=u[1];return n>0&&setTimeout((function(){l(),p(!0)}),n),Object(o.jsx)("div",{className:"".concat(r.a.alertBox," ").concat(d?r.a.alertBoxSlideUp:r.a.alertBoxSlideDown," ").concat(s?r.a.error:r.a.normal),children:Object(o.jsx)("p",{className:r.a.text,children:t})})}},115:function(e,t,n){e.exports={alertBox:"Alert_alertBox__1Y24C",error:"Alert_error__2uZjT",normal:"Alert_normal__1zTBC",alertBoxSlideDown:"Alert_alertBoxSlideDown__2hv5v","slide-down":"Alert_slide-down__3U7Kl",alertBoxSlideUp:"Alert_alertBoxSlideUp__2F_LW","slide-up":"Alert_slide-up__1D4Je",text:"Alert_text__3UCac",close:"Alert_close__cgCeF"}},116:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={TITLE_EDIT_DB:"Edit",TITLE_ADD_DB:"Add an expense",EXPENSE_ADDED:"Expense Added",EXPENSE_UPDATED:"Expense updated",CURRENCY:"Currency",ADD:"Add",DONE:"Done",SELECT_ACCOUNT:"Select an account",ERROR_IMG_SIZE_EXCEED:"Image size can not be more than 3MB",ERROR_NO_USER:"No user found",ERROR_UNAUTORISED:"Unauthorized: No token found",ERROR_ACCOUNT_NAME_EXISTS:"Account with this name already exists",ERROR_IMAGE_UPLOAD:"Error while uploading image",ERROR_REQUIRED_FIELDS:"Fill all the required fields",ERROR_FETCHING_TRANSACTIONS:"There is some error while fetching transactions.",WARNING_EMPTY_INPUT:" can not be empty",TOOLTIP_DELETE_TRANSACTION:"Delete",TOOLTIP_EDIT_TRANSACTION:"Edit",TOOLTIP_DOWNLOAD_IMAGE:"Download attached image",MSG_WALLET_REQUIRED:"Expense can not be added without a wallet."}},117:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return r}));var a=[{id:1,value:"\u20b9"},{id:2,value:"$"}],c={1:"\u20b9",2:"$"},s=!0,r=3},129:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return l}));var a=n(141),c=n.n(a),s=n(117),r=function(e){if(!s.d)return 1;var t=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})"),n=new RegExp("((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{6,}))|((?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9])(?=.{8,}))");return t.test(e)?1:n.test(e)?.5:0},o=function(e){return c.a.isEmail(e)},l=function(e){return e.size/1e6<s.a}},134:function(e,t,n){"use strict";n(2);var a=n(174),c=n(131),s=n(309),r=n(303),o=(n(145),n(46),n(1)),l=Object(r.a)((function(e){return{textColor:{color:"#000",justifyContent:"flex-end"},backgroundColor:{backgroundColor:"rgb(174 226 255 / 16%)",padding:"10px 10px",borderRadius:"5px",border:"none"},zIndex:{zIndex:"inherit"}}}));t.a=function(e){var t=e.formatandhandler,n=t.state,r=t.format,i=t.view,u=t.handler,d=l();return Object(o.jsx)(c.a,{utils:a.a,children:Object(o.jsx)(s.a,{fullWidth:!0,selected:n,InputProps:{className:[d.textColor,d.backgroundColor,d.zIndex]},value:n,variant:"inline",name:"datepicker",views:i,format:r,margin:"normal",onChange:u})})}},140:function(e,t,n){e.exports={blurredBackOverlay:"AccountDeleteDb_blurredBackOverlay__wtqhn",disable:"AccountDeleteDb_disable__2ev45",dialogContainer:"AccountDeleteDb_dialogContainer__hbmiW",adjustHeight:"AccountDeleteDb_adjustHeight__3eEk8",selectContainer:"AccountDeleteDb_selectContainer__1sbPf",cross:"AccountDeleteDb_cross__1gstP",error:"AccountDeleteDb_error__1Oiik",accountSelectInput:"AccountDeleteDb_accountSelectInput__3u1Tt",btnContainer:"AccountDeleteDb_btnContainer__xUZWb",RedirectionDBContainer:"AccountDeleteDb_RedirectionDBContainer__3jUTN",RedirectionDBlink:"AccountDeleteDb_RedirectionDBlink__3NU4a"}},144:function(e,t,n){e.exports={title:"ExpenseAdd_title__3l4-g",formBox:"ExpenseAdd_formBox__2HIMA",alert:"ExpenseAdd_alert__19JsN","MuiFormControl-fullWidth":"ExpenseAdd_MuiFormControl-fullWidth__20jtk",expenseTypeContainer:"ExpenseAdd_expenseTypeContainer__1SKTf",expenseTypeLabel:"ExpenseAdd_expenseTypeLabel__EGUrd",checkmark:"ExpenseAdd_checkmark__TCfBT",typeSelectInput:"ExpenseAdd_typeSelectInput__1NViR",itemInput:"ExpenseAdd_itemInput__3WNM8",currencySelectInput:"ExpenseAdd_currencySelectInput__1eNHh",accountSelectInput:"ExpenseAdd_accountSelectInput__2WaME",amountInput:"ExpenseAdd_amountInput__1kaAj",expenseImageContainer:"ExpenseAdd_expenseImageContainer__2WzTh",expenseImageInput:"ExpenseAdd_expenseImageInput__R3t-4",expenseImageButton:"ExpenseAdd_expenseImageButton__5DlO8",expenseImageButtonIcon:"ExpenseAdd_expenseImageButtonIcon__1Z2ND",expenseImageName:"ExpenseAdd_expenseImageName__1x9rQ",ImageButtonTooltip:"ExpenseAdd_ImageButtonTooltip__ljfry"}},149:function(e,t,n){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAwElEQVRIie2SsQ3CMBBFX0HJBBmCRUjENpgeRWIpSERAQgzCADgNlSlygGPHDulA8pOueufT99mQSPwlK6AGWsBY1QIVUDj914jz2DlDQ1VaZy4R5yU3wANYA5njM0CJN0D+pXtTi1Qjt1TSd5jo0CLd5ABnoLHSGuA+0Oe52UjaFwtgLgNuwEkGTaIivKKYs9lI335IFnweWdFfVcyB/8jLUIKS/pdrIi5U25FbktP9Ag0cI84equnWEkyeSPwwTynAWPnKu0XMAAAAAElFTkSuQmCC"},150:function(e,t,n){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAUxJREFUSEvt1TsuRlEUBeBPoyEGwAzUROMVWmIEBkFDCIV4NibBAMSjRUEiFEbBBNAokC33/DlOXP9/Ezq321n77LXX2vuc2+WPv64/rq8pwXvVUMfnOk6sCv8TtB35r1g0hwUMoSejfMnifHa3GMQd9nGSt1kOeRdLbXWwjdUq7wYj2Zkc+7Km0fkRXrGGQzxmB/vxkMWzOK3iwOaxgW60sFzBJSawjL0aFWkGAV9gqsgL9eFCC8sJntCLgaLzqHGNN4xmBSO/ryBIKltYpwSJPNW7QqgZb0IQsiZrLEpYqlf3AoS9OzjHdCTniTGY42rI6zjIrEpYIihtLIc8g7OSIOItrGSyw4qxKi6xum3erLbwE/9OarAvYhj3hc9pi56rhUgkEceFi4v22Xk7L+u6+5Wn4qeL/E/QwTPXMKXpL7Nh+e/XtHGRnw58APf6RhkecKgtAAAAAElFTkSuQmCC"},314:function(e,t,n){"use strict";n.r(t);var a=n(110),c=n(112),s=n(14),r=n(2),o=n(7),l=n(144),i=n.n(l),u=n(19),d=n.n(u),p=n(28),m=n(134),_=n(114),x=n(129),A=n(16),b=n(117),j=n(116),g=n(149),O=n(150),E=n(140),I=n.n(E),h=n(8),f=n(1);var D=function(e){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:I.a.blurredBackOverlay}),Object(f.jsxs)("div",{className:"".concat(I.a.dialogContainer," ").concat(I.a.RedirectionDBContainer),children:[Object(f.jsx)("p",{children:e.message}),Object(f.jsx)(h.b,{to:e.link,className:I.a.RedirectionDBlink,children:e.btnText})]})]})},R=1,N=0,T=2;t.default=function(){var e=Object(o.f)(),t=Object(r.useState)({userID:{},date:new Date,itemname:"",currency:1,amount:"",expenseImage:null,expenseType:R,account:null}),n=Object(s.a)(t,2),l=n[0],u=n[1],E=Object(r.useState)(""),I=Object(s.a)(E,2),h=I[0],C=I[1],S=Object(r.useRef)(null),y=Object(r.useState)(null),v=Object(s.a)(y,2),B=v[0],k=v[1],w=Object(r.useState)({flg:!1,msg:""}),U=Object(s.a)(w,2),L=U[0],F=U[1],M=Object(r.useState)(!1),z=Object(s.a)(M,2),G=z[0],W=z[1],P=Object(r.useState)(!1),Q=Object(s.a)(P,2),X=Q[0],Y=Q[1],K=Object(r.useState)(!1),Z=Object(s.a)(K,2),q=Z[0],H=Z[1],V=Object(r.useContext)(p.b).state;Object(r.useEffect)((function(){V.flg?(u(Object(c.a)(Object(c.a)({},l),{},{userID:V.userid})),Y(!0),J()):e.push("/signin")}),[]);var J=function(){d.a.post("/fetchaccounts",{userId:V.userid}).then((function(e){Y(!1),console.log(e.data),e.data&&0!=e.data.length?(H(!1),k(e.data)):H(!0)})).catch((function(e){Y(!1),console.log("Fetch accounts error"),console.log(e)}))},$=function(e){F({flg:!1,msg:""});var t,n=e.target.name;if("expenseImage"===n){if(""!=h)return u(Object(c.a)(Object(c.a)({},l),{},Object(a.a)({},n,null))),void C("");if(Object(x.c)(e.target.files[0])){C(e.target.files[0].name);var s=new FileReader;s.readAsDataURL(e.target.files[0]),s.onloadend=function(){console.log(s.result),u(Object(c.a)(Object(c.a)({},l),{},Object(a.a)({},n,s.result)))}}else F({flg:!0,msg:j.a.ERROR_IMG_SIZE_EXCEED})}else t=e.target.value,u(Object(c.a)(Object(c.a)({},l),{},Object(a.a)({},n,t)))};return V.flg?Object(f.jsxs)(f.Fragment,{children:[G&&Object(f.jsx)(_.a,{text:"Expense Added",delay:3e3,bShowCloseButton:!0}),X&&Object(f.jsx)(A.a,{showLoader:!0}),q&&Object(f.jsx)(D,{message:j.a.MSG_WALLET_REQUIRED,link:"/accounts",btnText:"Add a wallet"}),Object(f.jsxs)("div",{className:i.a.formBox,children:[Object(f.jsx)("h1",{className:i.a.title,children:j.a.TITLE_ADD_DB}),L.flg&&Object(f.jsx)("h5",{className:i.a.alert,children:L.msg}),Object(f.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""==l.date||""==l.itemname||""==l.currency||""==l.amount||null==l.account&&null!=B&&B.length>0?F({flg:!0,msg:j.a.ERROR_REQUIRED_FIELDS}):(Y(!0),d.a.post("/expensesadd",function(){var e=new FormData;return e.append("userID",l.userID),e.append("date",l.date),e.append("itemname",l.itemname),e.append("currency",l.currency),e.append("amount",l.amount),null!=l.expenseImage&&""!=l.expenseImage&&e.append("expenseImage",l.expenseImage),e.append("expenseType",l.expenseType),e.append("account",l.account),e}(),{headers:{"Content-type":"multipart/form-data"}}).then((function(e){Y(!1),console.log(">>>>>>>>>>>>>>>>>> ".concat(e.status)),200===e.status&&W(!0)})).catch((function(t){switch(Y(!1),t.response.status){case 500:F({flg:!0,msg:j.a.ERROR_NO_USER}),e.push("/signin");break;case 401:F({flg:!0,msg:j.a.ERROR_UNAUTORISED}),e.push("/signin");break;case 400:console.log(">>>>>>>>>> ".concat(t.response.status)),F({flg:!0,msg:j.a.ERROR_IMAGE_UPLOAD});break;default:return null}})))},noValidate:!0,children:[Object(f.jsxs)("div",{className:i.a.expenseTypeContainer,children:[Object(f.jsxs)("label",{className:i.a.expenseTypeLabel,children:[Object(f.jsx)("input",{type:"radio",checked:l.expenseType==R,value:R,onChange:$,className:i.a.expenseTypeInput,name:"expenseType"}),Object(f.jsx)("span",{className:i.a.checkmark}),"Income"]}),Object(f.jsxs)("label",{className:i.a.expenseTypeLabel,children:[Object(f.jsx)("input",{type:"radio",value:N,onChange:$,className:i.a.expenseTypeInput,name:"expenseType"}),Object(f.jsx)("span",{className:i.a.checkmark}),"Spent"]}),Object(f.jsxs)("label",{className:i.a.expenseTypeLabel,children:[Object(f.jsx)("input",{type:"radio",value:T,onChange:$,className:i.a.expenseTypeInput,name:"expenseType"}),Object(f.jsx)("span",{className:i.a.checkmark}),"Investment"]})]}),Object(f.jsx)(m.a,{formatandhandler:{state:l.date,format:"dd/MM/yyyy",view:["year","month","date"],handler:function(e){F({flg:!1,msg:""}),u(Object(c.a)(Object(c.a)({},l),{},{date:e}))}}}),Object(f.jsx)("div",{children:Object(f.jsx)("input",{className:i.a.itemInput,name:"itemname",value:l.itemname,onChange:$,placeholder:0==l.expenseType?"Item name":1==l.expenseType?"Income source":"Name",required:!0})}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("select",{className:i.a.currencySelectInput,name:"currency",onChange:$,children:[Object(f.jsx)("option",{"aria-label":"None",value:"",children:j.a.CURRENCY+"*"}),b.b.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.value},e.id)}))]}),Object(f.jsx)("input",{className:i.a.amountInput,name:"amount",type:"number",value:l.amount,onChange:$,placeholder:"Amount",required:!0})]}),null!=B&&B.length>0&&Object(f.jsx)("div",{children:Object(f.jsxs)("select",{className:i.a.accountSelectInput,name:"account",onChange:$,children:[Object(f.jsx)("option",{"aria-label":"None",value:"",children:j.a.SELECT_ACCOUNT+"*"}),B.map((function(e){return Object(f.jsx)("option",{value:e._id,children:e.accountName},e._id)}))]})}),Object(f.jsxs)("div",{className:i.a.expenseImageContainer,children:[""==h&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("input",{name:"expenseImage",className:i.a.expenseImageInput,accept:"image/*",ref:S,type:"file",onChange:$}),Object(f.jsx)("button",{type:"button",title:"Attach an image",className:i.a.expenseImageButton,onClick:function(){return S.current.click()},children:Object(f.jsx)("img",{src:g.a,className:i.a.expenseImageButtonIcon})})]}),""!=h&&Object(f.jsx)("button",{name:"expenseImage",type:"button",title:"Unattach image",className:i.a.expenseImageButton,onClick:$,children:Object(f.jsx)("img",{src:O.a,className:i.a.expenseImageButtonIcon})}),Object(f.jsx)("p",{className:i.a.expenseImageName,children:h})]}),Object(f.jsx)("button",{type:"submit",className:"btnSubmit",children:j.a.ADD})]})]})]}):null}}}]);