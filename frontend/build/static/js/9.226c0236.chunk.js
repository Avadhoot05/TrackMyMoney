(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[9],{110:function(e,t,n){"use strict";function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return c}))},112:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(110);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},114:function(e,t,n){"use strict";var c=n(14),a=n(2),o=n(115),r=n.n(o),s=n(1);t.a=function(e){var t=e.text,n=e.delay,o=(e.bShowCloseButton,e.bError),i=e.reset;console.log("Alert"),console.log(t),console.log(n);var l=Object(a.useState)(!1),u=Object(c.a)(l,2),d=u[0],b=u[1];return n>0&&setTimeout((function(){i(),b(!0)}),n),Object(s.jsx)("div",{className:"".concat(r.a.alertBox," ").concat(d?r.a.alertBoxSlideUp:r.a.alertBoxSlideDown," ").concat(o?r.a.error:r.a.normal),children:Object(s.jsx)("p",{className:r.a.text,children:t})})}},115:function(e,t,n){e.exports={alertBox:"Alert_alertBox__1Y24C",error:"Alert_error__2uZjT",normal:"Alert_normal__1zTBC",alertBoxSlideDown:"Alert_alertBoxSlideDown__2hv5v","slide-down":"Alert_slide-down__3U7Kl",alertBoxSlideUp:"Alert_alertBoxSlideUp__2F_LW","slide-up":"Alert_slide-up__1D4Je",text:"Alert_text__3UCac",close:"Alert_close__cgCeF"}},116:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var c={TITLE_EDIT_DB:"Edit",TITLE_ADD_DB:"Add an expense",EXPENSE_ADDED:"Expense Added",EXPENSE_UPDATED:"Expense updated",CURRENCY:"Currency",ADD:"Add",DONE:"Done",SELECT_ACCOUNT:"Select an account",ERROR_IMG_SIZE_EXCEED:"Image size can not be more than 3MB",ERROR_NO_USER:"No user found",ERROR_UNAUTORISED:"Unauthorized: No token found",ERROR_ACCOUNT_NAME_EXISTS:"Account with this name already exists",ERROR_IMAGE_UPLOAD:"Error while uploading image",ERROR_REQUIRED_FIELDS:"Fill all the required fields",ERROR_FETCHING_TRANSACTIONS:"There is some error while fetching transactions.",WARNING_EMPTY_INPUT:" can not be empty",TOOLTIP_DELETE_TRANSACTION:"Delete",TOOLTIP_EDIT_TRANSACTION:"Edit",TOOLTIP_DOWNLOAD_IMAGE:"Download attached image",MSG_WALLET_REQUIRED:"Expense can not be added without a wallet."}},119:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(23);var a=n(29);function o(e){return function(e){if(Array.isArray(e))return Object(c.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(29);function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(c.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw r}}}}},139:function(e,t,n){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAWklEQVRIiWNgGCmggYGB4T8a7iDXsKNYDCMWH0Y3jAmLBf/IdRnUkmEGGHGIk+tVDPOwxQFVwagFoxaMWjBqAQUWPCHDrMekKPaEaiC2JnvEwMDgQYajhgAAAHQzJawIGW+JAAAAAElFTkSuQmCC"},140:function(e,t,n){e.exports={blurredBackOverlay:"AccountDeleteDb_blurredBackOverlay__wtqhn",disable:"AccountDeleteDb_disable__2ev45",dialogContainer:"AccountDeleteDb_dialogContainer__hbmiW",adjustHeight:"AccountDeleteDb_adjustHeight__3eEk8",selectContainer:"AccountDeleteDb_selectContainer__1sbPf",cross:"AccountDeleteDb_cross__1gstP",error:"AccountDeleteDb_error__1Oiik",accountSelectInput:"AccountDeleteDb_accountSelectInput__3u1Tt",btnContainer:"AccountDeleteDb_btnContainer__xUZWb",RedirectionDBContainer:"AccountDeleteDb_RedirectionDBContainer__3jUTN",RedirectionDBlink:"AccountDeleteDb_RedirectionDBlink__3NU4a"}},192:function(e,t,n){e.exports={errorMsg:"Accounts_errorMsg__1hqc7",disabled:"Accounts_disabled__3Kh19",container:"Accounts_container__2IbsP",hide:"Accounts_hide__24P3W",inputBox:"Accounts_inputBox__xC5hx",nameInput:"Accounts_nameInput__Y7sU6",addButtonIcon:"Accounts_addButtonIcon__1xtlK",newAccountsContainer:"Accounts_newAccountsContainer__2EoO-",newAccountItem:"Accounts_newAccountItem__15qvI",newAccountName:"Accounts_newAccountName__Yxz76",crossButton:"Accounts_crossButton__2r_zA",saveButton:"Accounts_saveButton__2DTny",secondContainer:"Accounts_secondContainer__j4KRS",secondContainerMarginTop:"Accounts_secondContainerMarginTop__22kOL",ButtonContainer:"Accounts_ButtonContainer__1Vzp2",existingAccountHeading:"Accounts_existingAccountHeading__2qKf2",saveButtonContainer:"Accounts_saveButtonContainer__V_AVY",newButton:"Accounts_newButton__3HZmN",existingAccountsContainer:"Accounts_existingAccountsContainer__VuO0S",accountItem:"Accounts_accountItem__2E3R5",trashButton:"Accounts_trashButton__2rNRs",btn:"Accounts_btn__F6FQx",right:"Accounts_right__13Iq4",marginRight:"Accounts_marginRight__Y7zCM"}},313:function(e,t,n){"use strict";n.r(t);var c=n(119),a=n(128),o=n(112),r=n(14),s=n(19),i=n.n(s),l=n(2),u=n(7),d=n(28),b=n(116),_=n(192),j=n.n(_),O=n(21),f=n(139),A=n(157),h=n(140),m=n.n(h),g=n(114),p=n(1),x=1,C=2;var D=function(e){var t=e.accounts,n=e.accountDeleteId,c=e.hideDialog,a=e.updateAccountListAfterDelete,o=Object(l.useState)("-1"),s=Object(r.a)(o,2),u=s[0],_=s[1],j=Object(l.useState)({flag:!1,msg:""}),f=Object(r.a)(j,2),A=f[0],h=f[1],D=Object(l.useContext)(d.b).state.userid,N=t.filter((function(e){return e.id==n}));t=t.filter((function(e){return e.id!=n})),console.log(t);var v=function(e){i.a.post("deleteuseraccount",e).then((function(t){console.log(t),200==t.status&&(e.accountDeleteType==x?g.a:console.log("".concat(t.data.modifiedCount," transactions tranfered"))),c(),a()})).catch((function(e){g.a,c()}))};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:m.a.blurredBackOverlay}),Object(p.jsxs)("div",{className:"".concat(m.a.dialogContainer," ").concat(0==t.length&&m.a.adjustHeight),children:[Object(p.jsx)("img",{onClick:function(){return c()},src:O.a,className:m.a.cross,alt:"close"}),0==t.length?Object(p.jsxs)("p",{children:["The data related to ",Object(p.jsx)("span",{children:N[0].accountName})," will be lost permanantly."]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:["Select any wallet to transfer the transactions related to ",Object(p.jsx)("span",{children:N[0].accountName}),". Clicking on Delete will erase the data permanantly."]}),Object(p.jsxs)("div",{className:m.a.selectContainer,children:[A.flag&&Object(p.jsx)("p",{className:m.a.error,children:A.msg}),Object(p.jsxs)("select",{className:m.a.accountSelectInput,name:"account",onChange:function(e){console.log(e.target.value),_(e.target.value),h({flag:!1,msg:""})},children:[Object(p.jsx)("option",{"aria-label":"None",value:"-1",children:b.a.SELECT_ACCOUNT+"*"}),t.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.accountName},e.id)}))]})]})]}),Object(p.jsxs)("div",{className:m.a.btnContainer,children:[Object(p.jsx)("button",{className:"".concat("-1"!=u&&m.a.disable),onClick:function(){v({accountDeleteType:x,userId:D,accountDeleteId:n})},children:"Delete"}),0!=t.length&&Object(p.jsx)("button",{onClick:function(){"-1"!=u?v({accountDeleteType:C,userId:D,accountDeleteId:n,accountTransferId:u}):h({flag:!0,msg:"Account is not selected"})},children:"Transfer and Delete"})]})]})]})};t.default=function(){var e=Object(u.f)(),t=Object(l.useRef)(null),n=Object(l.useContext)(d.b).state,s=n.userid,_=Object(l.useState)({accounts:[],userId:null}),h=Object(r.a)(_,2),m=h[0],g=h[1],x=Object(l.useState)([]),C=Object(r.a)(x,2),N=C[0],v=C[1],E=Object(l.useState)(null),I=Object(r.a)(E,2),T=I[0],y=I[1],R=Object(l.useState)({flag:!1,msg:""}),S=Object(r.a)(R,2),w=S[0],B=(S[1],Object(l.useState)({flag:!1,msg:""})),U=Object(r.a)(B,2),k=U[0],P=U[1],L=Object(l.useState)(!1),M=Object(r.a)(L,2),W=M[0],F=M[1],G=Object(l.useRef)(null);Object(l.useEffect)((function(){n.flg?(g(Object(o.a)(Object(o.a)({},m),{},{userId:n.userid})),Y()):e.push("/signin")}),[]);var Y=function(){console.log(s),i.a.post("/fetchaccounts",{userId:s}).then((function(e){console.log("Fetch Accounts");var t=function(e){var t,n=[],c=Object(a.a)(e);try{for(c.s();!(t=c.n()).done;){var o=t.value;n.push({accountName:o.accountName,id:o._id})}}catch(r){c.e(r)}finally{c.f()}return console.log(n),n}(e.data);v(Object(c.a)(t))})).catch((function(e){console.log("Fetch accounts error"),console.log(e)}))},H=function(){g(Object(o.a)(Object(o.a)({},m),{},{accounts:[]})),F(!W)};return Object(p.jsxs)(p.Fragment,{children:[w.flag&&Object(p.jsx)("h1",{children:w.msg}),null!=T&&Object(p.jsx)(D,{accounts:N,accountDeleteId:T,hideDialog:function(){y(null)},updateAccountListAfterDelete:function(){v(N.filter((function(e){return e.id!=T})))}}),W&&Object(p.jsxs)("div",{className:j.a.container,children:[Object(p.jsxs)("div",{className:j.a.formContainer,children:[Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i.a.post("useraccount",{data:m}).then((function(e){switch(e.status){case 200:Y(),g(Object(o.a)(Object(o.a)({},m),{},{accounts:[]}))}})).catch((function(e){}))},noValidate:!0,children:[Object(p.jsxs)("div",{className:j.a.inputBox,children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{className:j.a.nameInput,placeholder:"Wallet Name",ref:t,onChange:function(e){P({flag:!1,msg:""})},required:!0}),k&&Object(p.jsx)("p",{className:j.a.errorMsg,children:k.msg})]}),Object(p.jsx)(A.a,{title:"Add an account",size:"45",color:"white",onClick:function(e){var n=t.current.value;n.length?(t.current.value="",function(e){var t,n=Object(a.a)(m.accounts);try{for(n.s();!(t=n.n()).done;){var c=t.value;if(e.replaceAll(" ","").toLowerCase()===c.replaceAll(" ","").toLowerCase())return P({flag:!0,msg:b.a.ERROR_ACCOUNT_NAME_EXISTS}),!0}}catch(i){n.e(i)}finally{n.f()}var o,r=Object(a.a)(N);try{for(r.s();!(o=r.n()).done;){var s=o.value;if(e.replaceAll(" ","").toLowerCase()===s.accountName.replaceAll(" ","").toLowerCase())return P({flag:!0,msg:b.a.ERROR_ACCOUNT_NAME_EXISTS}),!0}}catch(i){r.e(i)}finally{r.f()}return!1}(n)||g(Object(o.a)(Object(o.a)({},m),{},{accounts:[].concat(Object(c.a)(m.accounts),[n])}))):P({flag:!0,msg:"Name"+b.a.WARNING_EMPTY_INPUT})},className:j.a.addButtonIcon})]}),Object(p.jsx)("button",{className:j.a.hide,ref:G,type:"submit"})]}),0!=m.accounts.length&&Object(p.jsx)("div",{className:j.a.newAccountsContainer,children:m.accounts.map((function(e,t){return Object(p.jsxs)("div",{className:j.a.newAccountItem,children:[Object(p.jsx)("p",{className:j.a.newAccountName,children:e}),Object(p.jsx)("img",{title:"Erase this name",src:O.a,className:j.a.crossButton,onClick:function(){return function(e){var t=m.accounts;t.splice(e,1),g(Object(o.a)(Object(o.a)({},m),{},{accounts:t}))}(t)}})]},t)}))})]}),Object(p.jsxs)("div",{className:"".concat(j.a.ButtonContainer," ").concat(j.a.saveButtonContainer),children:[Object(p.jsx)("button",{type:"submit",className:"".concat(j.a.saveButton," ").concat((null==m.accounts||!m.accounts.length)&&j.a.disabled),onClick:function(){return G.current.click()},children:"Save"}),Object(p.jsx)("button",{type:"button",className:j.a.saveButton,onClick:H,children:"Cancel"})]})]}),Object(p.jsxs)("div",{className:"".concat(j.a.secondContainer," ").concat(W&&j.a.secondContainerMarginTop),children:[Object(p.jsxs)("div",{className:j.a.ButtonContainer,children:[Object(p.jsx)("h2",{className:j.a.existingAccountHeading,children:"Existing Wallets"}),!W&&Object(p.jsxs)("button",{className:j.a.btn,onClick:H,children:[Object(p.jsx)(A.a,{className:j.a.marginRight}),"Add"]})]}),Object(p.jsx)("hr",{}),Object(p.jsx)("div",{className:j.a.existingAccountsContainer,children:null!=N&&N.length?N.map((function(e,t){return Object(p.jsxs)("div",{className:j.a.accountItem,children:[Object(p.jsx)("p",{className:j.a.accountName,children:e.accountName}),Object(p.jsx)("img",{title:"Delete this account",src:f.a,className:j.a.trashButton,onClick:function(){return t=e.id,console.log("delete ID"),console.log(t),void y(t);var t}})]},t)})):0==m.accounts.length&&Object(p.jsx)("p",{children:"No Wallets"})})]})]})}}}]);